<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>講座コンテンツ管理 | AI SNSマーケティング＆オンライン講座プラットフォーム</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="css/style.css">
<style>
  /* 進捗バー */
  .progress-wrap{margin:16px 0}
  .progress{height:8px;background:#eee;border-radius:8px;overflow:hidden}
  .progress > span{display:block;height:100%;width:0;transition:width .3s}
  video:focus{outline:none;}
</style>
<style>
  /* 共通フレーム：16:9で強制 */
  .media-frame{
    position:relative;
    width:100%;
    max-width:900px;
    aspect-ratio:16/9;
    border-radius:12px;
    overflow:hidden;
    background:#000;
    margin:0 auto; /* 中央寄せ */
  }
  /* 中身（video/iframe）をフレームにフィット */
  .media-frame > *{
    position:absolute;
    inset:0;
    width:100% !important;
    height:100% !important;
    border:0 !important;
    outline:0 !important;
    object-fit:contain;
  }

  /* 念のためS-003内のサイズを完全上書き */
  #s003-course-view video,
  #s003-course-view iframe{
    width:100% !important;
    height:100% !important;
    max-width:none !important;
  }
</style></head>
<body>
  <!-- サイドバー -->
  <nav class="sidebar">
    <div class="logo-container">
      <div class="logo-icon">AI</div>
      <div class="logo">Creator Agency</div>
    </div>
    <div class="nav-menu">
      <a href="index.html" class="nav-item">
        <i class="material-icons-round">dashboard</i><span>ダッシュボード</span>
      </a>
      <a href="sns-marketing.html" class="nav-item">
        <i class="material-icons-round">tag</i><span>SNSマーケティング</span>
      </a>
      <a href="content-scheduler.html" class="nav-item">
        <i class="material-icons-round">edit</i><span>コンテンツ作成</span>
      </a>
      <a href="seminar-management.html" class="nav-item">
        <i class="material-icons-round">event</i><span>セミナー管理</span>
      </a>
      <a href="course-content.html" class="nav-item active">
        <i class="material-icons-round">video_library</i><span>講座コンテンツ</span>
      </a>
      <a href="student-management.html" class="nav-item">
        <i class="material-icons-round">people</i><span>受講生管理</span>
      </a>
      <div class="nav-section-title">アカウント</div>
      <a href="revenue-management.html" class="nav-item">
        <i class="material-icons-round">payments</i><span>売上・支払い管理</span>
      </a>
      <a href="settings.html" class="nav-item">
        <i class="material-icons-round">settings</i><span>設定</span>
      </a>
    </div>
  </nav>

  <!-- メイン -->
  <main class="main-content">
    <!-- ヘッダー -->
 <section id="s003-course-view" class="container" style="max-width:900px;margin:0 auto;padding:24px;">
  <h1 style="font-size:1.4rem;margin-bottom:12px;">S-003 コース視聴</h1>

  <!-- ここが統一サイズのラッパ -->
<div class="media-frame">
 <iframe width="560" height="315" 
  src="https://www.youtube.com/embed/0oSZY-BRjjI" 
  frameborder="0" 
  allowfullscreen>
</iframe>
</div>

  <!-- 進捗バー -->
  <div style="margin:14px 0 6px;display:flex;justify-content:space-between;align-items:center;">
    <strong>視聴進捗</strong>
    <span id="s003-percent">0%</span>
  </div>
  <div style="height:10px;background:#eee;border-radius:999px;overflow:hidden;">
    <div id="s003-bar" style="height:100%;width:0%;background:#4caf50;"></div>
  </div>
</section>


  <!-- 完了ボタン（任意） -->
  <button id="s003-complete" style="margin-top:14px;padding:10px 16px;border:0;border-radius:999px;cursor:pointer;">
    このレッスンを完了にする
  </button>

  <!-- 資料ダウンロード -->
  <h2 style="font-size:1.1rem;margin:28px 0 8px;">資料ダウンロード</h2>
  <ul style="line-height:1.9;">
    <!-- ↓ファイルURLを差し替え -->
    <li><a href="https://example.com/files/s003-handout.pdf" download>ハンドアウト（PDF）</a></li>
    <li><a href="https://example.com/files/s003-slides.pdf" download>スライド（PDF）</a></li>
  </ul>
</section>

<script>
(function () {
  const KEY_TIME = 's003_time';
  const KEY_DONE = 's003_done';
  const v = document.getElementById('lessonPlayer');
  const bar = document.getElementById('s003-bar');
  const pct = document.getElementById('s003-percent');
  const btn = document.getElementById('s003-complete');

  // 再開：前回位置へ
  const saved = parseFloat(localStorage.getItem(KEY_TIME) || '0');
  if (!isNaN(saved)) v.currentTime = saved;

  // 進捗更新
  function update() {
    if (!v.duration || isNaN(v.duration)) return;
    const percent = Math.min(100, Math.round((v.currentTime / v.duration) * 100));
    bar.style.width = percent + '%';
    pct.textContent = percent + '%';
  }

  // 再生中は数秒ごとに保存
  let tick;
  v.addEventListener('play', () => {
    tick = setInterval(() => {
      localStorage.setItem(KEY_TIME, String(v.currentTime));
      update();
    }, 1500);
  });
  v.addEventListener('pause', () => { clearInterval(tick); update(); });
  v.addEventListener('timeupdate', update);
  v.addEventListener('ended', () => {
    localStorage.setItem(KEY_DONE, '1');
    bar.style.width = '100%';
    pct.textContent = '100%';
  });

  // 手動で完了
  btn.addEventListener('click', () => {
    localStorage.setItem(KEY_DONE, '1');
    bar.style.width = '100%';
    pct.textContent = '100%';
    alert('S-003 を完了にしました');
  });

  // 完了状態の復元
  if (localStorage.getItem(KEY_DONE) === '1') {
    bar.style.width = '100%';
    pct.textContent = '100%';
  }
})();
</script> 
<main class="container">
  <h2>S-003 コース視聴</h2>

  <!-- 進捗表示 -->
  <div class="progress-wrap">
    <div class="progress"><span id="s003Bar" style="background:#4CAF50;"></span></div>
    <small id="s003Pct">0%</small>
  </div>

 <!-- 動画 -->
<iframe width="560" height="315" 
  src="https://www.youtube.com/embed/0oSZY-BRjjI" 
  frameborder="0" 
  allowfullscreen>
</iframe>

  <!-- 資料DL -->
  <p style="margin-top:12px;">
    <a href="/files/s003-handout.pdf" download
       onclick="localStorage.setItem('s003_dl_handout','1')">ハンドアウトをダウンロード</a>
  </p>

  <!-- 完了ボタン -->
  <button id="s003DoneBtn">このレッスンを完了にする</button>
  </main>

  <!-- コース編集モーダル -->
  <div id="courseModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.35); align-items:center; justify-content:center; z-index:9999;">
    <div class="card" style="width:min(680px, 92vw);">
      <div class="card-header">
        <div class="card-title" id="courseModalTitle">新規コース</div>
        <a class="card-action" id="closeCourseModal">閉じる</a>
      </div>
      <form id="courseForm">
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
          <div>
            <label>タイトル</label>
            <input id="courseTitle" type="text" required class="form-control" placeholder="例）SNSコンテンツ作成マスター講座">
          </div>
          <div>
            <label>価格（¥）</label>
            <input id="coursePrice" type="number" min="0" step="100" class="form-control" placeholder="例）128000">
          </div>
          <div>
            <label>カテゴリー</label>
            <input id="courseCategory" type="text" class="form-control" placeholder="例）マーケティング">
          </div>
          <div>
            <label>サムネイルURL</label>
            <input id="courseThumb" type="url" class="form-control" placeholder="https://...">
          </div>
          <div style="grid-column:1/-1;">
            <label>説明</label>
            <textarea id="courseDescription" class="form-control" rows="4" placeholder="講座の概要や到達目標など"></textarea>
          </div>
        </div>
        <div style="margin-top:14px; display:flex; gap:8px; justify-content:flex-end;">
          <button type="button" id="saveDraftCourseBtn" class="btn-secondary"><i class="material-icons-round" style="font-size:18px;vertical-align:middle;">save</i><span style="margin-left:6px;">下書き保存</span></button>
          <button type="submit" class="btn-secondary"><i class="material-icons-round" style="font-size:18px;vertical-align:middle;">check</i><span style="margin-left:6px;">保存</span></button>
        </div>
      </form>
    </div>
  </div>

  <!-- コンテンツ追加/編集モーダル -->
  <div id="contentModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.35); align-items:center; justify-content:center; z-index:9999;">
    <div class="card" style="width:min(640px, 92vw);">
      <div class="card-header">
        <div class="card-title" id="contentModalTitle">コンテンツ追加</div>
        <a class="card-action" id="closeContentModal">閉じる</a>
      </div>
      <form id="contentForm">
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
          <div>
            <label>タイプ</label>
            <select id="contentType" class="form-select">
              <option value="video">動画</option>
              <option value="pdf">資料</option>
              <option value="quiz">テスト</option>
            </select>
          </div>
          <div>
            <label>所要時間（分）</label>
            <input id="contentDuration" type="number" min="0" step="5" class="form-control" placeholder="例）20">
          </div>
          <div style="grid-column:1/-1;">
            <label>タイトル</label>
            <input id="contentTitle" type="text" required class="form-control" placeholder="例）ショート動画の台本テンプレ">
          </div>
          <div style="grid-column:1/-1;">
            <label>URL / ファイルパス</label>
            <input id="contentURL" type="text" class="form-control" placeholder="https://... または /files/sample.pdf">
          </div>
        </div>
        <div style="margin-top:14px; display:flex; gap:8px; justify-content:flex-end;">
          <button type="submit" class="btn-secondary"><i class="material-icons-round" style="font-size:18px;vertical-align:middle;">check</i><span style="margin-left:6px;">追加/更新</span></button>
        </div>
      </form>
    </div>
  </div>

  <script src="js/script.js"></script>
  <script>
(function(){
  const KEY_TIME='s003_time';
  const KEY_DONE='s003_done';
  const v=document.getElementById('lessonPlayer');
  const bar=document.getElementById('s003Bar');
  const pct=document.getElementById('s003Pct');
  const btn=document.getElementById('s003DoneBtn');

  // 復元：再開位置
  const saved = +localStorage.getItem(KEY_TIME) || 0;
  v.addEventListener('loadedmetadata', ()=>{
    if(saved>0 && saved < v.duration-2){ v.currentTime = saved; }
    updateProgress();
  });

  // 再生中は1秒ごとに保存
  let t=null;
  v.addEventListener('play', ()=>{ t=setInterval(saveTime,1000); });
  v.addEventListener('pause', ()=>{ clearInterval(t); saveTime(); });
  v.addEventListener('ended', ()=>{ clearInterval(t); markDone(); });

  function saveTime(){
    localStorage.setItem(KEY_TIME, Math.floor(v.currentTime));
    updateProgress();
  }
  function updateProgress(){
    if(!v.duration){ return; }
    const ratio = Math.min(100, Math.round((v.currentTime / v.duration)*100));
    bar.style.width = ratio + '%';
    pct.textContent = ratio + '%';
    if(localStorage.getItem(KEY_DONE)==='1'){ bar.style.background='#2F9E44'; }
  }
  function markDone(){
    localStorage.setItem(KEY_DONE,'1');
    updateProgress();
  }

  // 「完了」ボタン
  btn.addEventListener('click', ()=>{
    markDone();
    alert('S-003 を完了にしました。');
  });
})();
</script>
</body>
</html>
